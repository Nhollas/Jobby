@using Jobby.Client.ViewModels.BoardViewModels;
@model DashboardViewModel
@{
    Layout = "_Layout";
    ViewData["Title"] = "Dashboard";
}

<section class="p-8 flex flex-col gap-y-4 relative h-full">
    <h1 class="text-xl xl:text-2xl font-semibold uppercase">Dashboard</h1>
    <div class="flex flex-col gap-y-12">
        <div class="w-full flex flex-row gap-x-4 border-b-1 border-gray-900 pb-4">
            <h2 class="text-lg font-medium w-full mr-auto">Owned Boards</h2>
            @if (Model.Boards.Count > 0)
            {
                <button
                    onclick='showElement("create-board-parent")'
                    class="btn-primary w-full max-w-[16rem] cursor-pointer py-2">
                    Create Board
                </button>   
            }
        </div>
        @if (Model.Boards.Count == 0)
        {
            <div class="w-full flex justify-center items-center">
                <button
                    onclick='showElement("create-board-parent")'
                    class="btn-primary w-full max-w-[16rem] cursor-pointer py-2">
                    Create Your First Board
                </button>
            </div>
        }

        <div class="w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
            @foreach (var item in Model.Boards)
            {
                <div class="bg-gray-50 border-1 border-gray-900 w-full relative cursor-pointer">
                    <div class="absolute right-0 top-0 py-2 pr-2 h-full grid grid-rows-2 gap-y-2 items-center justify-center border-gray-900">
                        <button
                            hx-post="/Board/UpdatePartial"
                            hx-vals='{"BoardId": "@item.Id", "Name": "@item.Name"}'
                            hx-swap="innerHTML"
                            hx-target="#update-board-parent"
                            onclick='showElement("update-board-parent")'
                            class="text-sm rounded-full px-4 py-1 font-semibold border-1 border-main-orange bg-orange-100">
                            Edit
                        </button>
                        <button
                            hx-post="/Board/DeletePartial"
                            hx-vals='{"BoardId": "@item.Id", "Name": "@item.Name"}'
                            hx-swap="innerHTML"
                            hx-target="#delete-board-parent"
                            onclick='showElement("delete-board-parent")'
                            class="text-sm rounded-full px-4 py-1 font-semibold border-1 border-main-red bg-red-100">
                            Delete
                        </button>
                    </div>
                    <a asp-action="ViewBoard" asp-controller="Board" asp-route-boardId="@item.Id">
                        <div class="flex flex-col p-4 pr-14">
                            <p class="text-lg font-medium text-ellipsis overflow-hidden ... whitespace-nowrap">@item.Name</p>
                            <p class="text-sm">Created: @item.FormatedCreatedDate</p>
                        </div>
                    </a>
                </div>
            }
        </div>
        <h2 class="text-lg font-medium w-full self-end border-b-1 border-gray-900 pb-4">Boards Shared With Me (Coming Soon)</h2>
        <p class="w-max bg-gray-50 border-1 border-gray-900 p-4 -mt-6">Check out our roadmap for the project at <a href="https://github.com/Nhollas/Jobby" class="underline text-main-blue">Github</a>.</p>
    </div>

    <div id="update-board-parent" class="absolute inset-0 bg-gray-50/90 hidden flex justify-center"></div>
    <div id="delete-board-parent" class="absolute inset-0 bg-gray-50/90 hidden flex justify-center"></div>
    <div id="create-board-parent" class="absolute inset-0 bg-gray-50/90 hidden flex justify-center">
        <partial name="~/Views/Board/_CreateBoardPartial.cshtml" model="Model.BoardToCreate" />
    </div>
</section>